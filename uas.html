<!DOCTYPE html>
<html lang="id">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0" />
<title>Elegant Login - Local DB</title>

<style>
  :root{
    --primary:#4f46e5;
    --danger:#ef4444;
    --bg:#f1f5f9;
  }

  *{box-sizing:border-box}

  body{
    font-family: Poppins, Arial;
    background: linear-gradient(135deg,#4f46e5,#06b6d4);
    min-height:100vh;
    display:flex;
    align-items:center;
    justify-content:center;
    padding:18px;
  }

  .card{
    width:100%;
    max-width:450px;
    background:white;
    padding:28px 26px;
    border-radius:18px;
    box-shadow:0 25px 45px rgba(0,0,0,.18);
    animation:fade .6s ease;
  }

  @keyframes fade{
    from{opacity:0; transform:translateY(25px)}
    to{opacity:1; transform:translateY(0)}
  }

  h2{margin:6px 0 4px}

  .field{margin:14px 0}
  input{
    width:100%;
    padding:11px 12px;
    border-radius:12px;
    border:1px solid #d1d5db;
    transition:.2s;
  }
  input:focus{
    outline:none;
    border:1px solid var(--primary);
  }

  button{
    width:100%;
    padding:11px;
    border:none;
    border-radius:14px;
    color:white;
    background:var(--primary);
    font-weight:600;
    cursor:pointer;
    margin-top:10px;
    transition:.2s;
  }

  button:active{transform:scale(.98)}

  #userPage{display:none}

  /* -------- Popup -------- */
  .popup-wrap{
    position:fixed;
    inset:0;
    display:none;
    align-items:center;
    justify-content:center;
    background:rgba(0,0,0,.45);
    z-index:99;
  }
  .popup{
    background:white;
    padding:20px;
    border-radius:16px;
    width:100%;
    max-width:320px;
    text-align:center;
    animation:fade .25s;
  }
  .popup h4{margin:0 0 8px}
  .popup p{margin-top:0;color:#6b7280}
  .popup button{
    background:var(--danger);
    margin-top:14px;
  }

  /* Responsive */
  @media(max-width:480px){
    .card{padding:20px}
  }
</style>
</head>

<body>

<!-- POPUP -->
<div class="popup-wrap" id="popupBox">
  <div class="popup">
    <h4 id="popupTitle">Oops</h4>
    <p id="popupMsg">Pesan popup</p>
    <button onclick="Popup.close()">Tutup</button>
  </div>
</div>

<!-- LOGIN -->
<div class="card" id="loginBox">
  <h2>Masuk</h2>
  <p style="color:#6b7280">Silakan login dulu</p>

  <div class="field">
    <input id="username" placeholder="Username">
  </div>

  <div class="field">
    <input id="password" type="password" placeholder="Password">
  </div>

  <button onclick="auth.login()">Masuk</button>
</div>

<!-- DASHBOARD -->
<div class="card" id="userPage">
  <h2>Dashboard</h2>
  <p><b>Nama:</b> <span id="namaUser"></span></p>
  <p><b>Status:</b> Login berhasil ✔️</p>

  <button style="background:#ef4444" onclick="auth.logout()">Logout</button>
</div>

<script>
/* ===========================
      POPUP CLASS
=========================== */
class PopupClass{
  static open(title,msg){
    document.getElementById("popupTitle").textContent = title;
    document.getElementById("popupMsg").textContent = msg;
    document.getElementById("popupBox").style.display = "flex";
  }
  static close(){
    document.getElementById("popupBox").style.display = "none";
  }
}
const Popup = PopupClass;

/* ===========================
    AUTH + "DATABASE"
=========================== */
class Auth{
  constructor(){
    // create local DB if not exists
    if(!localStorage.getItem("usersDB")){
      localStorage.setItem("usersDB", JSON.stringify([
        {username:"admin", password:"12345"},
        {username:"siswa01", password:"abc123"},
        {username:"guru01", password:"pbo2025"}
      ]));
    }

    this.users = JSON.parse(localStorage.getItem("usersDB"));
    this.autoLogin();
  }

  login(){
    const u = document.getElementById("username").value.trim();
    const p = document.getElementById("password").value.trim();

    if(!u || !p){
      Popup.open("Perhatian","Username & password wajib diisi.");
      return;
    }

    const found = this.users.find(x=>x.username===u && x.password===p);

    if(!found){
      Popup.open("Login gagal","Username atau password salah.");
      return;
    }

    localStorage.setItem("userLogin", JSON.stringify(found));
    this.showUser(found.username);
  }

  logout(){
    localStorage.removeItem("userLogin");
    document.getElementById("userPage").style.display="none";
    document.getElementById("loginBox").style.display="block";
  }

  autoLogin(){
    const saved = localStorage.getItem("userLogin");
    if(saved){
      const u = JSON.parse(saved);
      this.showUser(u.username);
    }
  }

  showUser(name){
    document.getElementById("namaUser").textContent = name;
    document.getElementById("loginBox").style.display="none";
    document.getElementById("userPage").style.display="block";
  }
}

const auth = new Auth();
</script>

</body>
</html>
