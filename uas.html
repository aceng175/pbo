<!DOCTYPE html>
<html lang="id">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Login OOP â€” Local Storage</title>

<style>
body{
  font-family:Poppins,Arial;
  background:linear-gradient(135deg,#4f46e5,#06b6d4);
  min-height:100vh;
  display:flex;
  align-items:center;
  justify-content:center;
}

.card{
  width:100%;
  max-width:420px;
  background:white;
  padding:26px;
  border-radius:16px;
  box-shadow:0 25px 45px rgba(0,0,0,.2);
}

input{
  width:100%;
  padding:10px;
  margin:10px 0;
  border-radius:10px;
  border:1px solid #d1d5db;
}

button{
  width:100%;
  padding:10px;
  border-radius:12px;
  border:none;
  background:#4f46e5;
  color:white;
  font-weight:600;
  cursor:pointer;
}

#dashboard{display:none}
</style>
</head>

<body>

<!-- LOGIN -->
<div class="card" id="loginBox">
  <h2>Masuk</h2>
  <input id="username" placeholder="Username">
  <input id="password" type="password" placeholder="Password">
  <button onclick="auth.login()">Masuk</button>
</div>

<!-- DASHBOARD -->
<div class="card" id="dashboard">
  <h2>Dashboard</h2>
  <p>Selamat datang, <b><span id="namaUser"></span></b></p>
  <button style="background:#ef4444" onclick="auth.logout()">Logout</button>
</div>

<script>
/* =========================
        DATABASE CLASS
========================= */
class Database{
  constructor(){
    this.dbVersion = "v1";

    // Reset data jika versi berbeda
    if(localStorage.getItem("dbVersion") !== this.dbVersion){
      const users = [
        {username:"marcel", password:"12345"},
        {username:"aceng", password:"123"},
      ];
      localStorage.setItem("usersDB", JSON.stringify(users));
      localStorage.setItem("dbVersion", this.dbVersion);
      localStorage.removeItem("userLogin");
    }
  }

  getUsers(){
    return JSON.parse(localStorage.getItem("usersDB"));
  }

  saveLogin(user){
    localStorage.setItem("userLogin", JSON.stringify(user));
  }

  getLogin(){
    return JSON.parse(localStorage.getItem("userLogin"));
  }

  clearLogin(){
    localStorage.removeItem("userLogin");
  }
}

/* =========================
            UI CLASS
========================= */
class UI{
  static showLogin(){
    document.getElementById("loginBox").style.display = "block";
    document.getElementById("dashboard").style.display = "none";
  }

  static showDashboard(username){
    document.getElementById("namaUser").textContent = username;
    document.getElementById("loginBox").style.display = "none";
    document.getElementById("dashboard").style.display = "block";
  }

  static clearInput(){
    document.getElementById("username").value = "";
    document.getElementById("password").value = "";
  }
}

/* =========================
          AUTH CLASS
========================= */
class Auth{
  constructor(db){
    this.db = db;
    this.users = db.getUsers();
    this.autoLogin();
  }

  login(){
    const u = document.getElementById("username").value.trim();
    const p = document.getElementById("password").value.trim();

    if(!u || !p){
      alert("Username dan password wajib diisi!");
      return;
    }

    const user = this.users.find(
      x => x.username === u && x.password === p
    );

    if(!user){
      alert("Username atau pa
