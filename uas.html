<!DOCTYPE html>
<html lang="id">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Login OOP â€” Local Storage</title>

<style>
body{
  font-family:Poppins,Arial;
  background:linear-gradient(135deg,#4f46e5,#06b6d4);
  min-height:100vh;
  display:flex;
  align-items:center;
  justify-content:center;
  margin:0;
}

.card{
  width:100%;
  max-width:420px;
  background:white;
  padding:26px;
  border-radius:16px;
  box-shadow:0 25px 45px rgba(0,0,0,.2);
  position:relative;
  z-index:10;
}

input{
  width:100%;
  padding:10px;
  margin:10px 0;
  border-radius:10px;
  border:1px solid #d1d5db;
}

button{
  width:100%;
  padding:10px;
  border-radius:12px;
  border:none;
  background:#4f46e5;
  color:white;
  font-weight:600;
  cursor:pointer;
}

#dashboard{display:none}
</style>
</head>

<body>

<div class="card" id="loginBox">
  <h2>Masuk</h2>
  <input id="username" placeholder="Username">
  <input id="password" type="password" placeholder="Password">
  <button id="btnLogin">Masuk</button>
</div>

<div class="card" id="dashboard">
  <h2>Dashboard</h2>
  <p>Selamat datang, <b><span id="namaUser"></span></b></p>
  <button id="btnLogout" style="background:#ef4444">Logout</button>
</div>

<script>
/* ================= DATABASE ================= */
class Database{
  constructor(){
    this.version = "v1";
    if(localStorage.getItem("dbVersion") !== this.version){
      localStorage.setItem("usersDB", JSON.stringify([
        {username:"marcel", password:"12345"},
        {username:"aceng", password:"123"}
      ]));
      localStorage.setItem("dbVersion", this.version);
      localStorage.removeItem("userLogin");
    }
  }

  getUsers(){ return JSON.parse(localStorage.getItem("usersDB")) || []; }
  saveLogin(u){ localStorage.setItem("userLogin", JSON.stringify(u)); }
  getLogin(){ return JSON.parse(localStorage.getItem("userLogin")); }
  clearLogin(){ localStorage.removeItem("userLogin"); }
}

/* ================= UI ================= */
class UI{
  static showLogin(){
    document.querySelector("#loginBox").style.display="block";
    document.querySelector("#dashboard").style.display="none";
  }

  static showDashboard(name){
    document.querySelector("#namaUser").textContent=name;
    document.querySelector("#loginBox").style.display="none";
    document.querySelector("#dashboard").style.display="block";
  }

  static clear(){
    document.querySelector("#username").value="";
    document.querySelector("#password").value="";
  }
}

/* ================= AUTH ================= */
class Auth{
  constructor(db){
    this.db=db;
    this.users=db.getUsers();
    this.autoLogin();
  }

  login(){
    const u=document.querySelector("#username").value.trim();
    const p=document.querySelector("#password").value.trim();

    if(!u||!p) return alert("Username & password wajib diisi");

    const user=this.users.find(x=>x.username===u&&x.password===p);
    if(!user) return alert("Login gagal");

    this.db.saveLogin(user);
    UI.showDashboard(user.username);
    UI.clear();
  }

  logout(){
    this.db.clearLogin();
    UI.showLogin();
  }

  autoLogin(){
    const u=this.db.getLogin();
    if(u) UI.showDashboard(u.username);
  }
}

/* ================= START ================= */
const auth=new Auth(new Database());

document.querySelector("#btnLogin").addEventListener("click",()=>auth.login());
document.querySelector("#btnLogout").addEventListener("click",()=>auth.logout());
</script>

</body>
</html>
