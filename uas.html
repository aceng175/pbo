<!DOCTYPE html>
<html lang="id">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0" />
<title>Login OOP â€” Local DB</title>

<style>
  body{
    font-family:Poppins,Arial;
    background:linear-gradient(135deg,#4f46e5,#06b6d4);
    min-height:100vh;
    display:flex;
    align-items:center;
    justify-content:center;
    padding:18px;
  }
  .card{
    width:100%;
    max-width:450px;
    background:white;
    padding:26px;
    border-radius:16px;
    box-shadow:0 25px 45px rgba(0,0,0,.2);
  }
  input{
    width:100%;
    padding:10px;
    border-radius:10px;
    border:1px solid #d1d5db;
    margin:10px 0;
  }
  button{
    width:100%;
    padding:10px;
    border-radius:12px;
    border:none;
    color:white;
    background:#4f46e5;
    font-weight:600;
    margin-top:6px;
  }
  #userPage{display:none}
</style>
</head>

<body>

<!-- LOGIN -->
<div class="card" id="loginBox">
  <h2>Masuk</h2>
  <input id="username" placeholder="Username">
  <input id="password" type="password" placeholder="Password">
  <button onclick="auth.login()">Masuk</button>
</div>

<!-- DASHBOARD -->
<div class="card" id="userPage">
  <h2>Dashboard</h2>
  <p><b>Nama:</b> <span id="namaUser"></span></p>
  <button style="background:#ef4444" onclick="auth.logout()">Logout</button>
</div>

<script>
/* ============================
      DATABASE CLASS
============================ */
class Database{
  constructor(){
    if(!localStorage.getItem("usersDB")){
      localStorage.setItem("usersDB", JSON.stringify([
        {username:"marcel", password:"12345"},
        {username:"aceng", password:"123"},
      ]));
    }
  }

  getUsers(){
    return JSON.parse(localStorage.getItem("usersDB"));
  }

  saveLogin(user){
    localStorage.setItem("userLogin", JSON.stringify(user));
  }

  getLogin(){
    return JSON.parse(localStorage.getItem("userLogin"));
  }

  clearLogin(){
    localStorage.removeItem("userLogin");
  }
}

/* ============================
          UI CLASS
============================ */
class UI{
  static showLogin(){
    document.getElementById("loginBox").style.display="block";
    document.getElementById("userPage").style.display="none";
  }

  static showDashboard(name){
    document.getElementById("namaUser").textContent = name;
    document.getElementById("loginBox").style.display="none";
    document.getElementById("userPage").style.display="block";
  }

  static clearFields(){
    document.getElementById("username").value="";
    document.getElementById("password").value="";
  }
}

/* ============================
          AUTH CLASS
============================ */
class Auth{
  constructor(db){
    this.db = db;
    this.users = db.getUsers();
    this.autoLogin();
  }

  login(){
    const u = document.getElementById("username").value.trim();
    const p = document.getElementById("password").value.trim();

    if(!u || !p){
      alert("Username & password harus diisi");
      return;
    }

    const found = this.users.find(x=>x.username===u && x.password===p);

    if(!found){
      alert("Username atau password salah!");
      return;
    }

    this.db.saveLogin(found);
    UI.showDashboard(found.username);
    alert("Login berhasil!");
  }

  logout(){
    this.db.clearLogin();
    UI.clearFields();
    UI.showLogin();
    alert("Logout berhasil");
  }

  autoLogin(){
    const saved = this.db.getLogin();
    if(saved){
      UI.showDashboard(saved.username);
    }
  }
}

/* ============================
        START APP
============================ */
const db = new Database();
const auth = new Auth(db);
</script>

</body>
</html>
