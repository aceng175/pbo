<!DOCTYPE html>
<html lang="id">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>UAS PBO - Login OOP</title>

<style>
body{
  font-family:Poppins,Arial;
  background:
    linear-gradient(
      135deg,
      #6b4f3f,   
      #c9b59a    
    );
  min-height:100vh;
  display:flex;
  justify-content:center;
  align-items:center;
  margin:0;
}

.card{
  width:100%;
  max-width:420px;
  background:white;
  padding:26px;
  border-radius:16px;
  box-shadow:0 25px 45px rgba(0,0,0,.2);
}

input{
  width:100%;
  padding:10px;
  margin:10px 0;
  border-radius:10px;
  border:1px solid #d1d5db;
}

button{
  width:100%;
  padding:10px;
  border-radius:12px;
  border:none;
  font-weight:600;
  cursor:pointer;
}

.btn-login{background:#2563eb;color:white}
.btn-logout{background:#dc2626;color:white}

#dashboard{display:none}
</style>
</head>

<body>

<!-- LOGIN PAGE -->
<div class="card" id="loginBox">
  <h2>Login</h2>
  <input id="username" placeholder="Username">
  <input id="password" type="password" placeholder="Password">
  <button class="btn-login" onclick="auth.login()">Login</button>
</div>

<!-- DASHBOARD -->
<div class="card" id="dashboard">
  <h2>Profil Pengguna</h2>
  <p>Username: <b><span id="namaUser"></span></b></p>
  <button class="btn-logout" onclick="auth.logout()">Logout</button>
</div>

<script>
/* ===============================
          DATABASE CLASS
   (LocalStorage = File I/O)
================================ */
class Database{
  constructor(){
    this.version = "v1";

    if(localStorage.getItem("dbVersion") !== this.version){
      const users = [
        {username:"marcel", password:"12345"},
        {username:"aceng", password:"123"},
        {username:"lamusu", password:"123"}
      ];
      localStorage.setItem("usersDB", JSON.stringify(users));
      localStorage.setItem("dbVersion", this.version);
      localStorage.removeItem("loginSession");
    }
  }

  getUsers(){
    return JSON.parse(localStorage.getItem("usersDB")) || [];
  }

  saveLogin(user){
    localStorage.setItem("loginSession", JSON.stringify(user));
  }

  getLogin(){
    return JSON.parse(localStorage.getItem("loginSession"));
  }

  clearLogin(){
    localStorage.removeItem("loginSession");
  }
}

/* ===============================
              UI CLASS
================================ */
class UI{
  static showLogin(){
    document.getElementById("loginBox").style.display="block";
    document.getElementById("dashboard").style.display="none";
  }

  static showDashboard(username){
    document.getElementById("namaUser").textContent=username;
    document.getElementById("loginBox").style.display="none";
    document.getElementById("dashboard").style.display="block";
  }

  static clearInput(){
    document.getElementById("username").value="";
    document.getElementById("password").value="";
  }
}

/* ===============================
            AUTH CLASS
================================ */
class Auth{
  constructor(database){
    this.db = database;
    this.autoLogin();
  }

  login(){
    const u = document.getElementById("username").value.trim();
    const p = document.getElementById("password").value.trim();

    if(!u || !p){
      alert("Username dan password harus diisi!");
      return;
    }

    const users = this.db.getUsers();
    const user = users.find(x => x.username === u && x.password === p);

    if(!user){
      alert("Login gagal! Username atau password salah.");
      return;
    }

    this.db.saveLogin(user);
    UI.showDashboard(user.username);
    UI.clearInput();
  }

  logout(){
    this.db.clearLogin();
    UI.showLogin();
    alert("Logout berhasil");
  }

  autoLogin(){
    const user = this.db.getLogin();
    if(user){
      UI.showDashboard(user.username);
    }
  }
}

/* ===============================
           START APP
================================ */
const auth = new Auth(new Database());
</script>

</body>
</html>
